# Phase 17.1: Automated Testing - Research

**Researched:** 2026-02-19
**Domain:** XCTest, XCUITest, Snapshot Testing for macOS SwiftUI menu bar app
**Confidence:** HIGH

## Summary

Tokemon already has a solid testing foundation: 8 unit test files in `TokemonTests/` and 4 UI test files in `TokemonUITests/`, both configured as targets in `project.yml` (XcodeGen) with working CI in GitHub Actions. The existing unit tests cover models and services (AlertManager, AnalyticsEngine, BurnRateCalculator, Constants, GradientColors, JSONLParser, UsageDataPoint, UsageSnapshot). The existing UI tests cover launch, basic popover interaction, layout overflow checks, and accessibility. What is **missing** is snapshot testing for visual regression detection, tests for the specific height/layout bugs the user reports, and broader coverage of untested services.

The primary work is: (1) add Point-Free's SnapshotTesting library as a dependency to the test target, (2) create a snapshot testing helper that wraps SwiftUI views in `NSHostingController` for macOS image capture, (3) write snapshot tests for all critical UI components (popover, floating window, settings tabs, usage header) across different states and themes, (4) add targeted unit tests for the popover height calculation logic in `TokemonApp.swift`, and (5) ensure everything runs in CI.

**Primary recommendation:** Add SnapshotTesting 1.18.x to the XcodeGen `TokemonTests` target (not a separate target), create an `NSHostingController`-based helper for SwiftUI view snapshotting on macOS, and systematically snapshot every major view at fixed sizes across all three themes.

## Standard Stack

### Core
| Library | Version | Purpose | Why Standard |
|---------|---------|---------|--------------|
| XCTest | Built-in | Unit and integration tests | Apple's official testing framework, already in use |
| XCUITest | Built-in | UI automation tests | Apple's official UI testing, already configured |
| SnapshotTesting | 1.18.9 | Visual regression detection | Point-Free's industry-standard snapshot library, explicitly requested in success criteria |

### Supporting
| Library | Version | Purpose | When to Use |
|---------|---------|---------|-------------|
| xcpretty | Latest | Readable test output | Already used in CI and test scripts |
| XcodeGen | 2.40+ | Project generation | Already used; needed to add SnapshotTesting package to project.yml |

### Alternatives Considered
| Instead of | Could Use | Tradeoff |
|------------|-----------|----------|
| SnapshotTesting | ViewInspector | ViewInspector inspects view hierarchy structurally but does NOT catch visual/pixel bugs like heights. SnapshotTesting catches the exact class of bugs the user reports. ViewInspector also has unclear support for `@Observable` (iOS 17+). |
| SnapshotTesting | iOSSnapshotTestCase (Uber) | Uber's library is UIKit-focused, less active, and does not support macOS natively. Point-Free is the standard for Swift. |

**Installation (in project.yml, not Package.swift):**
```yaml
# Add to packages section:
SnapshotTesting:
  url: https://github.com/pointfreeco/swift-snapshot-testing.git
  from: "1.18.0"

# Add to TokemonTests dependencies:
- package: SnapshotTesting
  product: SnapshotTesting
```

Then run `xcodegen generate` to regenerate the Xcode project.

**Important:** SnapshotTesting is added to the **test target only**, not the main app target. It must NOT be added to Package.swift (the SPM executable target has no test target defined, and adding one is complex due to the app's AppKit/SwiftUI dependencies). The Xcode/XcodeGen path is the correct approach.

## Architecture Patterns

### Recommended Test Structure
```
TokemonTests/
  AlertManagerTests.swift          # existing
  AnalyticsEngineTests.swift       # existing
  BurnRateCalculatorTests.swift    # existing
  ConstantsTests.swift             # existing
  GradientColorsTests.swift        # existing
  JSONLParserTests.swift           # existing
  UsageDataPointTests.swift        # existing
  UsageSnapshotTests.swift         # existing
  PopoverHeightTests.swift         # NEW: test height calculation logic
  Snapshots/
    SnapshotTestHelper.swift       # NEW: NSHostingController wrapper + helper
    PopoverSnapshotTests.swift     # NEW: popover in all states/themes
    FloatingWindowSnapshotTests.swift  # NEW: floating window snapshots
    UsageHeaderSnapshotTests.swift # NEW: header at various percentages
    UsageDetailSnapshotTests.swift # NEW: detail view states
    SettingsSnapshotTests.swift    # NEW: each settings tab
    __Snapshots__/                 # AUTO: reference images (committed to git)

TokemonUITests/
  TokemonUITests.swift             # existing
  TokemonLaunchTests.swift         # existing
  TokemonLayoutTests.swift         # existing - enhance with more assertions
  TokemonAccessibilityTests.swift  # existing
  README.md                        # existing
```

### Pattern 1: SwiftUI Snapshot Helper for macOS
**What:** A helper that wraps any SwiftUI view in an `NSHostingController` for snapshot capture on macOS.
**When to use:** Every snapshot test of a SwiftUI view.
**Example:**
```swift
// Source: Verified pattern from TrozWare blog + Point-Free docs
import SnapshotTesting
import SwiftUI
import XCTest
@testable import tokemon

/// Helper to snapshot SwiftUI views on macOS
extension SwiftUI.View {
    /// Wrap in NSHostingController with explicit frame for snapshot testing
    func snapshotController(width: CGFloat = 320, height: CGFloat = 400) -> NSViewController {
        let controller = NSHostingController(rootView: self)
        controller.view.frame = CGRect(x: 0, y: 0, width: width, height: height)
        // Force layout
        controller.view.layoutSubtreeIfNeeded()
        return controller
    }
}

/// Base class with common snapshot test configuration
class SnapshotTestCase: XCTestCase {
    override func invokeTest() {
        // Use 0.99 precision to allow for minor anti-aliasing differences
        // across machines (CI vs local)
        withSnapshotTesting(record: .missing) {
            super.invokeTest()
        }
    }
}
```

### Pattern 2: Testing Views with Mock Environment Objects
**What:** Creating lightweight mock/stub versions of `@Observable` classes to inject into views under test.
**When to use:** Snapshot tests that need specific states (e.g., 50% usage, critical alert).
**Example:**
```swift
// Create a snapshot-friendly UsageSnapshot with known state
let mockUsage = UsageSnapshot(
    primaryPercentage: 75.0,
    secondaryPercentage: nil,
    inputTokens: 5000,
    outputTokens: 2000,
    cacheReadTokens: nil,
    cacheCreationTokens: nil,
    resetTime: Date().addingTimeInterval(3600)
)

// Test the view at a specific state
let view = UsageHeaderView(usage: mockUsage, alertLevel: .warning)
    .environment(ThemeManager())

assertSnapshot(
    of: view.snapshotController(width: 320, height: 120),
    as: .image(precision: 0.99)
)
```

### Pattern 3: Multi-Theme Snapshot Matrix
**What:** Test each view across all three themes (Native, Light, Dark) to catch theme-specific regressions.
**When to use:** For every critical UI component snapshot.
**Example:**
```swift
func testUsageHeader_AllThemes() {
    let usage = UsageSnapshot.mockWithPercentage(75.0)

    for theme in AppTheme.allCases {
        let themeManager = ThemeManager()
        themeManager.selectedTheme = theme

        let view = UsageHeaderView(usage: usage, alertLevel: .normal)
            .environment(themeManager)

        assertSnapshot(
            of: view.snapshotController(width: 320, height: 120),
            as: .image(precision: 0.98),
            named: "theme-\(theme.rawValue)"
        )
    }
}
```

### Pattern 4: Popover Height Calculation Unit Tests
**What:** Direct unit tests for the popover height computation logic extracted from `TokemonApp.swift`.
**When to use:** To catch the exact category of bug the user reports (height not looking right).
**Example:**
```swift
func testPopoverHeight_BaseState_Returns300() {
    // When: No profiles, no chart, no update, no extra usage
    let height = calculatePopoverHeight(
        profileCount: 1,
        showExtraUsage: false,
        extraUsageEnabled: false,
        updateAvailable: false,
        showUsageTrend: false
    )
    XCTAssertEqual(height, 300, "Base popover height should be 300px")
}

func testPopoverHeight_WithChart_AddsChartHeight() {
    let heightWithChart = calculatePopoverHeight(
        profileCount: 1,
        showExtraUsage: false,
        extraUsageEnabled: false,
        updateAvailable: false,
        showUsageTrend: true
    )
    XCTAssertEqual(heightWithChart, 530, "Chart adds 230px to base 300px")
}
```

### Anti-Patterns to Avoid
- **Testing SwiftUI view body directly:** You cannot unit test `body` as a computed property. Use snapshot testing or extract logic into testable view models/helpers.
- **Snapshot tests that depend on system time:** Mock dates via dependency injection. The existing `UsageSnapshot.resetTimeFormatted` test already shows how the app formats times.
- **Running snapshot tests from SPM (`swift test`):** SPM cannot render NSHostingController-based snapshots. Always use `xcodebuild test` via the Xcode project.
- **Committing snapshots from different screen scales:** macOS snapshot images depend on the display scale (1x vs 2x Retina). CI machines (GitHub Actions macos-14) run at 2x. Ensure reference snapshots are generated on the same scale.

## Don't Hand-Roll

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Visual regression detection | Custom image diffing | SnapshotTesting `.image` strategy | Handles pixel comparison, diff generation, Xcode attachment integration, precision tolerance |
| SwiftUI view rendering in tests | Custom NSBitmapImageRep rendering | SnapshotTesting + NSHostingController | Handles layout, layer rendering, and image capture correctly |
| Test output formatting | Custom parsers | xcpretty (already installed) | Industry standard, integrates with CI |
| Xcode project generation | Manual .pbxproj edits | XcodeGen (already in use) | Adding SnapshotTesting dependency requires project.yml change, then `xcodegen generate` |

**Key insight:** The critical infrastructure already exists (XcodeGen, Xcode project, test targets, CI workflow). The work is adding SnapshotTesting as a dependency and writing the actual snapshot tests, not building infrastructure from scratch.

## Common Pitfalls

### Pitfall 1: Snapshot Image Scale Mismatch
**What goes wrong:** Reference snapshots recorded on a Retina Mac (2x) differ from those on CI runners or non-Retina displays.
**Why it happens:** macOS snapshot images are rendered at the main display's scale factor.
**How to avoid:** Always record reference snapshots from CI (or at consistent 2x scale). Use `precision: 0.98` to allow minor anti-aliasing differences. Document in README that snapshots should be recorded on 2x displays.
**Warning signs:** Tests pass locally but fail on CI (or vice versa) with pixel-level differences.

### Pitfall 2: Sandboxing Blocks Snapshot File Writes
**What goes wrong:** SnapshotTesting cannot write reference image files when the app is sandboxed.
**Why it happens:** macOS sandbox restricts file system access. The Tokemon project currently has `com.apple.security.app-sandbox: false` in entitlements, BUT the test target may still be sandboxed by Xcode.
**How to avoid:** Ensure the test target's build settings have `ENABLE_APP_SANDBOX = NO` in project.yml. The current `project.yml` does not set this for test targets; it may need to be added.
**Warning signs:** "failed to write snapshot" errors, empty `__Snapshots__` directories.

### Pitfall 3: @Observable Environment Dependencies in Snapshots
**What goes wrong:** SwiftUI views crash at snapshot time because `@Environment` objects are missing.
**Why it happens:** Views like `PopoverContentView` depend on `@Environment(UsageMonitor.self)`, `@Environment(AlertManager.self)`, etc. These must all be injected.
**How to avoid:** Create mock/stub instances of all `@Observable` types. For views with many dependencies (PopoverContentView needs 7 environment objects), consider snapshotting leaf views first (UsageHeaderView, UsageDetailView) which have fewer dependencies. Build up to composite views.
**Warning signs:** `Thread 1: Fatal error: No Observable object of type X found` at test time.

### Pitfall 4: SPM Test Target Limitations
**What goes wrong:** Attempting to add SnapshotTesting to Package.swift and run `swift test` fails.
**Why it happens:** The Tokemon app is an SPM `.executableTarget` with AppKit/SwiftUI dependencies. While Swift 5.5+ supports testing executable targets, the rendering of NSHostingController requires a full AppKit event loop that `swift test` does not provide. Additionally, SnapshotTesting needs to write files to the source tree.
**How to avoid:** Use the Xcode/XcodeGen path exclusively for snapshot tests. Keep `swift build` as a quick verification (already in CI as `spm-build` job), but run all tests via `xcodebuild test`.
**Warning signs:** Blank/empty snapshot images, crashes in NSHostingController initialization.

### Pitfall 5: Popover Height Calculation Not Testable
**What goes wrong:** The `popoverHeight` computed property in `TokemonApp` is embedded in the `App` struct and references `@State` and `@AppStorage` properties, making it impossible to unit test.
**Why it happens:** The calculation logic is coupled to SwiftUI state management.
**How to avoid:** Extract the height calculation into a pure function: `static func calculatePopoverHeight(profileCount:showExtraUsage:extraUsageEnabled:updateAvailable:showUsageTrend:) -> CGFloat`. This can be unit tested directly with known inputs.
**Warning signs:** Height bugs that only manifest at specific state combinations.

### Pitfall 6: Menu Bar App XCUITest Limitations
**What goes wrong:** XCUITest struggles to interact with the menu bar status item and popover in LSUIElement apps.
**Why it happens:** The status item lives in the system menu bar, outside the app's normal window hierarchy. The existing tests already show this challenge (conditional checks, fallback approaches).
**How to avoid:** For layout/visual testing, prefer snapshot tests over XCUITest. XCUITest is best for smoke tests (app launches, basic navigation). Don't try to build elaborate UI automation for the menu bar popover.
**Warning signs:** Flaky tests that depend on popover opening timing, tests that pass in Xcode but fail headless.

## Code Examples

### Adding SnapshotTesting to project.yml
```yaml
# In the packages section, add:
packages:
  MenuBarExtraAccess:
    url: https://github.com/orchetect/MenuBarExtraAccess.git
    from: "1.2.2"
  SettingsAccess:
    url: https://github.com/orchetect/SettingsAccess.git
    from: "2.1.0"
  KeychainAccess:
    url: https://github.com/kishikawakatsumi/KeychainAccess.git
    from: "4.2.2"
  # NEW:
  SnapshotTesting:
    url: https://github.com/pointfreeco/swift-snapshot-testing.git
    from: "1.18.0"

# In the TokemonTests target, add dependency:
  TokemonTests:
    type: bundle.unit-test
    platform: macOS
    sources:
      - path: TokemonTests
    settings:
      base:
        PRODUCT_BUNDLE_IDENTIFIER: ai.tokemon.app.tests
        TEST_HOST: "$(BUILT_PRODUCTS_DIR)/Tokemon.app/Contents/MacOS/Tokemon"
        BUNDLE_LOADER: "$(TEST_HOST)"
        LD_RUNPATH_SEARCH_PATHS: "@executable_path/../Frameworks @loader_path/../Frameworks"
    dependencies:
      - target: Tokemon
      - package: SnapshotTesting
        product: SnapshotTesting
```

### Snapshot Test Helper (macOS-specific)
```swift
// TokemonTests/Snapshots/SnapshotTestHelper.swift
import SnapshotTesting
import SwiftUI
import AppKit
import XCTest
@testable import tokemon

// MARK: - SwiftUI View Snapshotting Helper

extension SwiftUI.View {
    /// Creates an NSViewController suitable for snapshot testing on macOS.
    /// Wraps the SwiftUI view in NSHostingController with explicit dimensions.
    func snapshotController(
        width: CGFloat = 320,
        height: CGFloat = 400
    ) -> NSViewController {
        let vc = NSHostingController(rootView: self)
        vc.view.frame = CGRect(x: 0, y: 0, width: width, height: height)
        vc.view.layoutSubtreeIfNeeded()
        return vc
    }
}

// MARK: - Mock Data Factories

extension UsageSnapshot {
    /// Create a mock snapshot with OAuth data at a given percentage
    static func mockOAuth(
        percentage: Double,
        secondaryPercentage: Double? = nil,
        resetTime: Date? = Date().addingTimeInterval(3600)
    ) -> UsageSnapshot {
        UsageSnapshot(
            primaryPercentage: percentage,
            secondaryPercentage: secondaryPercentage,
            inputTokens: Int(percentage * 100),
            outputTokens: Int(percentage * 50),
            cacheReadTokens: nil,
            cacheCreationTokens: nil,
            resetTime: resetTime
        )
    }
}
```

### Example Snapshot Test
```swift
// TokemonTests/Snapshots/UsageHeaderSnapshotTests.swift
import SnapshotTesting
import SwiftUI
import XCTest
@testable import tokemon

final class UsageHeaderSnapshotTests: XCTestCase {

    func testUsageHeader_LowUsage() {
        let view = UsageHeaderView(
            usage: .mockOAuth(percentage: 25),
            alertLevel: .normal
        )
        .environment(ThemeManager())

        assertSnapshot(
            of: view.snapshotController(width: 320, height: 120),
            as: .image(precision: 0.98)
        )
    }

    func testUsageHeader_CriticalUsage() {
        let view = UsageHeaderView(
            usage: .mockOAuth(percentage: 95),
            alertLevel: .critical
        )
        .environment(ThemeManager())

        assertSnapshot(
            of: view.snapshotController(width: 320, height: 140),
            as: .image(precision: 0.98)
        )
    }

    func testUsageHeader_NoData() {
        let view = UsageHeaderView(
            usage: .empty,
            alertLevel: .normal
        )
        .environment(ThemeManager())

        assertSnapshot(
            of: view.snapshotController(width: 320, height: 120),
            as: .image(precision: 0.98)
        )
    }
}
```

### Extracting Testable Popover Height Logic
```swift
// Can be added as a static method on TokemonApp or a separate utility
static func calculatePopoverHeight(
    profileCount: Int,
    showExtraUsage: Bool,
    extraUsageEnabled: Bool,
    updateAvailable: Bool,
    showUsageTrend: Bool
) -> CGFloat {
    let baseHeight: CGFloat = 300
    var height = baseHeight

    if profileCount > 1 {
        let profileSwitcherHeight: CGFloat = 28
        let profileSummaryHeader: CGFloat = 32
        let profileRowHeight: CGFloat = 24
        height += profileSwitcherHeight + profileSummaryHeader + (CGFloat(profileCount) * profileRowHeight)
    }

    if showExtraUsage && extraUsageEnabled {
        height += 75
    }

    if updateAvailable {
        height += 56
    }

    if showUsageTrend {
        height += 230
    }

    return height
}
```

## State of the Art

| Old Approach | Current Approach | When Changed | Impact |
|--------------|------------------|--------------|--------|
| iOSSnapshotTestCase (Uber/Facebook) | SnapshotTesting (Point-Free) | ~2019 | Point-Free is the Swift community standard; Uber's lib is less maintained |
| `@ObservedObject` / `@EnvironmentObject` | `@Observable` / `@Environment` (Observation framework) | WWDC 2023 / iOS 17 | Tokemon uses `@Observable` -- test mocks must use this pattern, not the old `ObservableObject` protocol |
| Manual xcpretty parsing | `xcodebuild -resultBundlePath` + xcresult | Xcode 15+ | Rich test result bundles with attachments; SnapshotTesting diffs appear as Xcode attachments |
| XCTest only | Swift Testing (`@Test`, `@Suite`) | WWDC 2024 / Swift 6 | SnapshotTesting 1.17+ supports Swift Testing, but XCTest is still the standard for snapshot tests. XCUITest still requires XCTest. |

**Deprecated/outdated:**
- `ObservableObject` + `@Published`: Tokemon uses `@Observable` macro. Test helpers must match.
- FBSnapshotTestCase: Archived, use Point-Free's SnapshotTesting instead.

## Existing Infrastructure Assessment

### What Already Exists (do NOT rebuild)
| Component | Location | Status |
|-----------|----------|--------|
| XCTest target | `project.yml` TokemonTests | Working, 8 test files |
| XCUITest target | `project.yml` TokemonUITests | Working, 4 test files |
| CI workflow | `.github/workflows/ci.yml` | Working: build, unit tests, UI tests, lint, SPM build |
| Test runner script | `scripts/test.sh` | Working: unit, ui, all, quick modes |
| Xcode build script | `scripts/build-xcode.sh` | Working: build, test, clean, archive, regenerate |
| XcodeGen project spec | `project.yml` | Working: all targets, schemes, code signing |
| Test scheme | `project.yml` schemes.Tokemon.test | Configured with coverage gathering |

### What Needs Adding
| Component | Effort | Priority |
|-----------|--------|----------|
| SnapshotTesting package dependency in project.yml | Small | P0 |
| Snapshot test helper (NSHostingController wrapper) | Small | P0 |
| Mock data factories for UsageSnapshot, ThemeManager | Small | P0 |
| Snapshot tests for critical UI views | Medium | P0 |
| Extracted popover height calculation + unit tests | Small | P0 |
| Additional unit tests for untested services | Medium | P1 |
| CI snapshot reference image management | Small | P1 |

### Critical Views to Snapshot (by priority)
1. **PopoverContentView** -- the main UI users see; height bugs manifest here
2. **UsageHeaderView** -- dominant visual element; percentage display
3. **UsageDetailView** -- data rows; OAuth vs JSONL states
4. **FloatingWindowView** -- compact display; sizing critical
5. **SettingsView** (each tab) -- multiple tabs, overflow potential
6. **ProfileSwitcherView** -- multi-profile state
7. **BurnRateView** / **UsageChartView** -- chart rendering

### States to Cover per View
- Empty/no data state
- Low usage (25%)
- Medium usage (60%)
- High/warning usage (80%)
- Critical usage (95%)
- With and without secondary percentage
- OAuth vs JSONL data source
- Single profile vs multi-profile
- All three themes (Native, Light, Dark)
- With and without usage trend chart enabled

## Open Questions

1. **Screen Scale Consistency for CI**
   - What we know: GitHub Actions macos-14 runners use Retina (2x) displays. Local Macs may vary.
   - What's unclear: Whether the specific GitHub Actions runner resolution is stable across runs.
   - Recommendation: Record reference snapshots from CI, use precision of 0.98 to allow minor differences.

2. **NSHostingController Environment Injection Depth**
   - What we know: Views like PopoverContentView need 7 `@Environment` objects. UsageHeaderView only needs ThemeManager.
   - What's unclear: Whether all `@Observable` objects can be trivially constructed for testing (some may have side effects in `init`).
   - Recommendation: Start with leaf views (UsageHeaderView, UsageDetailView, FloatingWindowView) that have minimal dependencies. Build up to composite views.

3. **UsageSnapshot.source Property**
   - What we know: Views branch on `usage.source == .none` and `usage.source == .jsonl`. The `UsageSnapshot.empty` static property exists.
   - What's unclear: How to construct `UsageSnapshot` instances with specific `.source` values for testing.
   - Recommendation: Examine `UsageSnapshot` model in detail during implementation; may need a test-only initializer.

## Sources

### Primary (HIGH confidence)
- Tokemon source code -- `Package.swift`, `project.yml`, all files in `TokemonTests/`, `TokemonUITests/`, `Tokemon/Views/`, `Tokemon/TokemonApp.swift`
- [Point-Free swift-snapshot-testing GitHub](https://github.com/pointfreeco/swift-snapshot-testing) -- versions, API, strategies
- [Available Snapshot Strategies](https://github.com/pointfreeco/swift-snapshot-testing/blob/master/Documentation/Available-Snapshot-Strategies.md) -- macOS: NSView `.image`, NSViewController `.image`
- [Point-Free Swift Testing Support Blog](https://www.pointfree.co/blog/posts/146-swift-testing-support-for-snapshottesting) -- v1.17+ Swift Testing support
- [XcodeGen Project Spec](https://yonaskolb.github.io/XcodeGen/Docs/ProjectSpec.html) -- package dependency configuration

### Secondary (MEDIUM confidence)
- [TrozWare SwiftUI Snapshots](https://troz.net/post/2020/swiftui_snapshots/) -- NSHostingController pattern for macOS, sandboxing gotcha
- [Swift Forums: Executable Target Testability](https://forums.swift.org/t/executable-target-testability/52351) -- Swift 5.5+ supports `@testable import` from executable targets
- [Swift Snapshot Testing Releases](https://github.com/pointfreeco/swift-snapshot-testing/releases) -- v1.18.9 latest, Swift 6 support confirmed

### Tertiary (LOW confidence)
- [ViewInspector GitHub](https://github.com/nalexn/ViewInspector) -- alternative for structural view testing; unclear `@Observable` support

## Metadata

**Confidence breakdown:**
- Standard stack: HIGH -- SnapshotTesting is explicitly requested in success criteria, well-documented, verified current version
- Architecture: HIGH -- Existing project structure inspected, XcodeGen config analyzed, test targets verified working
- Pitfalls: HIGH -- Based on direct code analysis (environment dependencies counted, sandbox config checked, SPM limitations verified)

**Research date:** 2026-02-19
**Valid until:** 2026-03-19 (stable domain, 30 days)
