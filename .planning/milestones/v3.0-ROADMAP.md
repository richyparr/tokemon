# v3.0 Roadmap Archive

**Milestone:** v3.0 Competitive Parity & Growth
**Shipped:** 2026-02-17
**Goal:** Match Claude Usage Tracker feature-for-feature in FREE tier, then differentiate with team/org PRO features

## Summary

| Metric | Value |
|--------|-------|
| Phases | 7 (11-17) |
| Plans | 17 |
| Timeline | 2026-02-17 (1 day) |
| Total LOC | 14,418 Swift |
| Requirements | 33 satisfied |

## Key Accomplishments

1. **Multi-Profile Foundation** — Credential copy/switch architecture for multiple Claude accounts with TaskGroup parallel polling
2. **Menu Bar Customization** — 5 icon styles (battery, progress, percentage, icon+bar, compact) with monochrome mode
3. **Terminal Statusline** — Shell integration for bash/zsh with one-click install
4. **Distribution & Trust** — Homebrew tap, code signing, notarization, Sparkle auto-updates
5. **Team Dashboard PRO** — Org-wide usage aggregation via Admin API with date filtering
6. **Webhook Alerts PRO** — Slack Block Kit and Discord embed notifications at threshold
7. **Budget & Forecasting PRO** — Dollar budget tracking with arc gauge, pace indicator, time-to-limit prediction

## Phases

### Phase 11: Multi-Profile Foundation (3 plans)

**Goal:** Users can manage multiple Claude accounts with credential switching, replacing the removed v2.0 multi-account feature with a copy/switch architecture that works with Claude Code's keychain.

**Requirements:** PROF-01, PROF-02, PROF-03, PROF-04, PROF-05, PROF-06

Plans:
- 11-01: Profile model and ProfileManager service with copy/switch keychain operations
- 11-02: Profile management UI (Settings tab + popover switcher) and app integration
- 11-03: Multi-profile usage polling and simultaneous usage display in popover

**Key Decisions:**
- Used Process + /usr/bin/security for keychain I/O (not KeychainAccess) to avoid permission issues
- UserDefaults for profile persistence (lightweight, appropriate for small profile metadata)
- Multi-profile polling sequential after main refresh (not concurrent with active profile update)

---

### Phase 12: Menu Bar Customization (2 plans)

**Goal:** Users can personalize the menu bar icon style and color to match their preferences and see usage status at a glance.

**Requirements:** MENU-01, MENU-02, MENU-03

Plans:
- 12-01: MenuBarIconStyle model, icon renderer for 5 styles with monochrome/color support
- 12-02: AppearanceSettings UI overhaul with 5-style picker, monochrome toggle

**Key Decisions:**
- Renderer returns (image, title) tuple with exactly one non-nil
- NotificationCenter-based style change sync for immediate re-render
- Radio group picker iterates MenuBarIconStyle.allCases with displayName labels

---

### Phase 13: Terminal Statusline (2 plans)

**Goal:** Users can see their Claude usage directly in their terminal prompt, giving Claude Code users at-a-glance awareness.

**Requirements:** TERM-01, TERM-02, TERM-03, TERM-04

Plans:
- 13-01: StatuslineExporter service, StatuslineConfig model, and shell helper script
- 13-02: StatuslineSettings UI, app lifecycle wiring, and one-click install

**Key Decisions:**
- Shell helper script sources from ~/.tokemon/statusline cache file
- One-click "Add to ~/.zshrc" button for zero-friction installation
- JSON output available for advanced users

---

### Phase 14: Distribution & Trust (4 plans)

**Goal:** Users can install Tokemon via Homebrew, trust the code-signed and notarized binary, and receive automatic updates.

**Requirements:** DIST-01, DIST-02, DIST-03, DIST-04, DIST-05, AUTO-01

Plans:
- 14-01: Code signing, notarization, and GitHub Actions release workflow
- 14-02: Homebrew tap repository and formula
- 14-03: Sparkle framework integration, UpdateManager service, and update UI
- 14-04: Auto-start session notification when usage resets to 0%

**Key Decisions:**
- Used cask format (not formula) since Tokemon is a macOS .app distributed as DMG
- SHA256 computed once in release CI and forwarded via repository_dispatch to tap
- Named settings tab "Updates" (not "General") to avoid conflicting with RefreshSettings

---

### Phase 15: Team Dashboard PRO (2 plans)

**Goal:** Team leads and org admins can view aggregated usage across all org members, enabling proactive capacity management.

**Requirements:** TEAM-01, TEAM-02, TEAM-03

Plans:
- 15-01: TeamMember model, AdminAPIClient extensions for members and grouped usage
- 15-02: TeamDashboardView, MemberUsageRow, Settings integration with date filtering

**Key Decisions:**
- Pro-gated at view level with upgrade prompt for non-Pro users
- Admin API check before showing Team tab in Settings

---

### Phase 16: Webhook Alerts PRO (2 plans)

**Goal:** Users can receive Claude usage alerts directly in Slack and Discord channels.

**Requirements:** HOOK-01, HOOK-02, HOOK-03, HOOK-04

Plans:
- 16-01: WebhookConfig model, WebhookManager service with Slack/Discord payload formatting
- 16-02: WebhookSettings UI, AlertManager integration, and TokemonApp wiring

**Key Decisions:**
- Static payload methods for Sendable safety in Task.detached context (Swift 6 concurrency)
- WebhookError enum with LocalizedError conformance for UI-friendly test webhook feedback
- AlertManager.onWebhookCheck fires on every check — WebhookManager handles deduplication

---

### Phase 17: Budget & Forecasting PRO (2 plans)

**Goal:** Users can set dollar-based spending limits and see usage predictions, turning reactive monitoring into proactive budget management.

**Requirements:** BUDG-01, BUDG-02, BUDG-03, BUDG-04, FORE-01, FORE-02, FORE-03

Plans:
- 17-01: BudgetConfig model, BudgetManager service, ForecastingEngine, and AdminAPIClient cost-by-workspace extension
- 17-02: BudgetDashboardView with gauge/forecast/cost breakdown, Settings tab, and TokemonApp wiring

**Key Decisions:**
- ForecastingEngine uses static methods following BurnRateCalculator pattern (stateless, testable)
- Custom 270-degree arc gauge (ArcShape) instead of system Gauge for full visual control
- Rate-limited refreshIfNeeded() (5-minute interval) wired to onUsageChanged callback

---

## Progress Summary

| Phase | Name | Plans | Completed |
|-------|------|-------|-----------|
| 11 | Multi-Profile Foundation | 3/3 | 2026-02-17 |
| 12 | Menu Bar Customization | 2/2 | 2026-02-17 |
| 13 | Terminal Statusline | 2/2 | 2026-02-17 |
| 14 | Distribution & Trust | 4/4 | 2026-02-17 |
| 15 | Team Dashboard PRO | 2/2 | 2026-02-17 |
| 16 | Webhook Alerts PRO | 2/2 | 2026-02-17 |
| 17 | Budget & Forecasting PRO | 2/2 | 2026-02-17 |

---

*Archived: 2026-02-17*
*Total: 7 phases, 17 plans*
